{"componentChunkName":"component---src-templates-blogs-post-js","path":"/agro-algorithms/","result":{"data":{"site":{"siteMetadata":{"title":"Fabran99"}},"markdownRemark":{"id":"2abeba25-ed7b-5cfe-94d6-8e2004dd7e93","excerpt":"One of the real applications I am working on uses geographical data from the route of agricultural machines to obtain a series of relevant…","rawMarkdownBody":"![algorithms](algoritmo.jpg)\r\nOne of the real applications I am working on uses **geographical data** from the route of agricultural machines to **obtain a series of relevant statistics**. I mainly use the Pandas, GeoPandas, and Shapely libraries.\r\n\r\nI will discuss some of them following the reasoning that led me to solve the problems that arose.\r\n\r\n# Problems and Available Resources\r\nWe have a series of data on the route of a machine, with its geographical position and status (working, not working).\r\n![data](data.PNG)\r\nBased on this, we need to obtain all relevant information that helps measure the work done.\r\n\r\nSome of these statistics are:\r\n- Hectares worked\r\n- Overlapped area\r\n- Distance between 2 worked rows\r\n- Detection of headers\r\n\r\nTo help someone unfamiliar understand how these machines work, I'll provide a brief summary.\r\n\r\n## Agriculture Machines\r\n![harvester](cosechadora.jpg)\r\nThere are mainly 2 types of machines we monitor, planters and harvesters.\r\nPlanters sow seeds in a field while harvesters pick up the product once it grows.\r\n\r\nWhat they have in common is how they behave, the machines have an area to sow/harvest, and they cover it in a zigzag pattern.\r\n![zig zag](zigzag.png)\r\nHere is a representation of a machine's route.\r\n\r\n## Algorithm 1 - Detection of Headers and Work Lines\r\nAn important piece of data is that at the end of a work line, the machine lifts the head to make a 180-degree turn and move on to the next line.\r\n\r\nWhile this occurs, **the machine does not harvest or sow, so those pieces should be discarded.**\r\nFor this, first of all, we must **detect these cases** and separate them from the work lines themselves.\r\n\r\nThe algorithm I developed uses changes in the GPS angle to detect these 180-degree turns, and compares them with the time from the last data point. This way, we can have a **ratio of angle variation over time**. When it exceeds a certain value, it is estimated that the machine is making a turn sharp enough to be considered a header.\r\n\r\nThe steps to get to this result are:\r\n1. Calculate the difference in angle between the previous and current data. It is relevant to take into account that when passing from angle 0 to 359 there is not 359 degrees of distance, but 1.\r\n2. Calculate the time difference from the previous and current data.\r\n3. Calculate the ratio between angle variation and time variation.\r\n4. Data with a turnrate higher than 12 (a magic number obtained by trial and error) are given a \"turning\" flag = 1, and a 0 is assigned to the other data.\r\n5. Add a column with the difference between the \"turning\" state of the previous data and the current one. In those data where the difference is 0, it means that the previous state was maintained.\r\n\r\nIn this way, if I filter those rows with a state change of 1 or -1, what I obtain are the rows that begin a period of rotation or a line period.\r\n\r\n![code 2](code2.png)\r\n\r\nIf I separate the original dataframe using the rows from the previous step, I obtain multiple data segments, where work lines and headers alternate.\r\n\r\nIn the following images, you can see the results, where the points that make up the work lines are shown in blue and the headers in red. \r\n![case1](caso1.PNG)\r\n![case2](caso2.png)\r\n\r\nWith some later optimizations, the result improves noticeably.\r\n\r\n## Algorithm 2 - Detection of Interrow Distance\r\nA data point that is relevant for some clients is the distance between one work line and the next.\r\n\r\nThis algorithm requires the operator to work in a zigzag pattern, moving from one work line to the next in an orderly fashion. \r\n\r\nThe work lines are irregular and consist of hundreds of points, so the algorithm with which I solved the problem is as follows:\r\n\r\n![interrow](entrefila.png)\r\n1. Take a series of random points (**from now on A**) from a line and for each of them draw a perpendicular line (**from now on P**). \r\n2. These lines are intersected with the next work line at a point (**from now on B**).\r\n3. Measure the distance between A and B.\r\n4. Calculate the median of these distances.\r\n\r\nWhile there is quite an approximation in the algorithm, with this approach, a precision is obtained that is even greater than that of measurements made manually in the field, as dozens of samples can be obtained for each work line.\r\n\r\n## Algorithm 3 - Detection of Work State through Machine Learning\r\nA need that arose was to detect the working state of a machine (planter or harvester), as some do not carry a sensor that tells us when it is working, or in other cases, the sensor fails.\r\n\r\nThis algorithm uses **historical data of the route** of harvesters and planters while they were working, and data from periods when they were not working, and trains a **machine learning model** that can visually determine when a machine is making a route according to a work state and when it is not.\r\n\r\n### Images of Routes in Work State\r\n\r\n![route1](machinelearning1.PNG)\r\n### Images of Routes Without Work State (GPS Failures Are Included in This Classification)\r\n\r\n![route2](machinelearning2.PNG)\r\n\r\n### Train to Detect Which State Corresponds and Generate Alerts\r\n![training](img6.PNG)\r\n","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/530fb91f87b79dad7f21c7816bc03d46/4b190/algoritmo.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAFwAAAwEAAAAAAAAAAAAAAAAAAAIEBf/EABUBAQEAAAAAAAAAAAAAAAAAAAEC/9oADAMBAAIQAxAAAAHZkuWBgCv/xAAaEAABBQEAAAAAAAAAAAAAAAAQAQIDERIy/9oACAEBAAEFAn8xXoIP/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAx/9oACAEDAQE/ATV//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFRABAQAAAAAAAAAAAAAAAAAAICH/2gAIAQEABj8Ci//EABgQAAMBAQAAAAAAAAAAAAAAAAERQRAA/9oACAEBAAE/IWeulJV28//aAAwDAQACAAMAAAAQb+//xAAWEQEBAQAAAAAAAAAAAAAAAAABEBH/2gAIAQMBAT8QGif/xAAWEQEBAQAAAAAAAAAAAAAAAAABECH/2gAIAQIBAT8QHJ//xAAZEAADAAMAAAAAAAAAAAAAAAAQESEAQbH/2gAIAQEAAT8QTVGsZQu2eo//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"algorithms\"\n        title=\"algorithms\"\n        src=\"/static/530fb91f87b79dad7f21c7816bc03d46/1c72d/algoritmo.jpg\"\n        srcset=\"/static/530fb91f87b79dad7f21c7816bc03d46/a80bd/algoritmo.jpg 148w,\n/static/530fb91f87b79dad7f21c7816bc03d46/1c91a/algoritmo.jpg 295w,\n/static/530fb91f87b79dad7f21c7816bc03d46/1c72d/algoritmo.jpg 590w,\n/static/530fb91f87b79dad7f21c7816bc03d46/4b190/algoritmo.jpg 800w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nOne of the real applications I am working on uses <strong>geographical data</strong> from the route of agricultural machines to <strong>obtain a series of relevant statistics</strong>. I mainly use the Pandas, GeoPandas, and Shapely libraries.</p>\n<p>I will discuss some of them following the reasoning that led me to solve the problems that arose.</p>\n<h1>Problems and Available Resources</h1>\n<p>We have a series of data on the route of a machine, with its geographical position and status (working, not working).\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/028ab892e805e8f69b919883922d3f9b/6d2da/data.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.91891891891892%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABPUlEQVQoz1WSV7aDMAxEs62EasA0U0KA/S9FT1eUl3zoCOTRaEb2oyxL6dpWsiyTPM9lGAap69rCey9t00hzxjCMWvcS+nDUFNM07Y1/Pp/ygCiEIJ/PqvHRWKTSIVEUSVVVNgRiYt93rZWyLIt0XWeYru8Nk6SpvF4vefDD4TiOFtM0CaqTJLHMOcQERGVZGA6FYFp1ByZVYTdhCL3M77e8NWiiOY5jy879K9y2zRSCQwSYS+EPYVEUtwoazYJOJ1+7vaxfiukBQwaTqmXbIYfIHtUqdplODbAp/LI8z7NZBkcPGJS6c7ApZGqvsi+72KKGHe/rm5BbXNfV9vptudcLdWY5/SWcdDoKIKWGBa8kzjmpzh1CBCFYFIJhh2Buha29r+PtUbx2w5Mgo4JM0Jgk8XEJSgaGHjB8s8M/odJD2njqLBkAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"data\"\n        title=\"data\"\n        src=\"/static/028ab892e805e8f69b919883922d3f9b/fcda8/data.png\"\n        srcset=\"/static/028ab892e805e8f69b919883922d3f9b/12f09/data.png 148w,\n/static/028ab892e805e8f69b919883922d3f9b/e4a3f/data.png 295w,\n/static/028ab892e805e8f69b919883922d3f9b/fcda8/data.png 590w,\n/static/028ab892e805e8f69b919883922d3f9b/efc66/data.png 885w,\n/static/028ab892e805e8f69b919883922d3f9b/6d2da/data.png 936w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nBased on this, we need to obtain all relevant information that helps measure the work done.</p>\n<p>Some of these statistics are:</p>\n<ul>\n<li>Hectares worked</li>\n<li>Overlapped area</li>\n<li>Distance between 2 worked rows</li>\n<li>Detection of headers</li>\n</ul>\n<p>To help someone unfamiliar understand how these machines work, I’ll provide a brief summary.</p>\n<h2>Agriculture Machines</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c59480fd6d301a2f6e7ce3939f6abee6/e9794/cosechadora.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.2972972972973%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAOABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDAQT/xAAWAQEBAQAAAAAAAAAAAAAAAAADAAH/2gAMAwEAAhADEAAAAYwfEFzqLf/EABkQAAMBAQEAAAAAAAAAAAAAAAABAhETQf/aAAgBAQABBQJwz3lR10x0KqP/xAAXEQADAQAAAAAAAAAAAAAAAAAAERNB/9oACAEDAQE/AYrSJ//EABURAQEAAAAAAAAAAAAAAAAAAAAT/9oACAECAQE/AbLv/8QAGRAAAgMBAAAAAAAAAAAAAAAAAAEQESEx/9oACAEBAAY/Ao5Fqkaf/8QAHBAAAwACAwEAAAAAAAAAAAAAAAERIUExUWFx/9oACAEBAAE/IVtEWGxdkzcV+lioEGSvw//aAAwDAQACAAMAAAAQnD//xAAWEQADAAAAAAAAAAAAAAAAAAAAEVH/2gAIAQMBAT8Qkw9P/8QAFxEBAQEBAAAAAAAAAAAAAAAAAQBBcf/aAAgBAgEBPxBblxf/xAAaEAEAAwADAAAAAAAAAAAAAAABABEhMWGh/9oACAEBAAE/EMpcW1q9UkSX4RWjU5UBgdu9YIj+hn//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"harvester\"\n        title=\"harvester\"\n        src=\"/static/c59480fd6d301a2f6e7ce3939f6abee6/1c72d/cosechadora.jpg\"\n        srcset=\"/static/c59480fd6d301a2f6e7ce3939f6abee6/a80bd/cosechadora.jpg 148w,\n/static/c59480fd6d301a2f6e7ce3939f6abee6/1c91a/cosechadora.jpg 295w,\n/static/c59480fd6d301a2f6e7ce3939f6abee6/1c72d/cosechadora.jpg 590w,\n/static/c59480fd6d301a2f6e7ce3939f6abee6/a8a14/cosechadora.jpg 885w,\n/static/c59480fd6d301a2f6e7ce3939f6abee6/e9794/cosechadora.jpg 1064w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nThere are mainly 2 types of machines we monitor, planters and harvesters.\nPlanters sow seeds in a field while harvesters pick up the product once it grows.</p>\n<p>What they have in common is how they behave, the machines have an area to sow/harvest, and they cover it in a zigzag pattern.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8ae3fe8ed942ec3cd5c922ab9549f6b4/50383/zigzag.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.37837837837837%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAD0ElEQVQ4yyWUaVdaVxSG+QNdTaNG5kFkEAEZRGS63IHLZUZEE5EhGBAcEpOYVrParn7oH3+6tR/O2udOz3n3ed9zbWanRuOkQdYsECtnqfVqVFoqaluneVJHbxtoTY1Do0CtX8foNeS9PNWmgdW1MFo19IZO96RJo9/E1hs06Q9aNKXGlZy8WCVvlch2VZKtKTvqiJA2ImKcy/0ug7M248kZiqWTVo5R6hrVukq0kGUjHsI2PO/Q7lv0h+1XpSUBeWoZ/PUcgdqYbWWKozLDVV3iKC8JVy9FSZ/uaZsjrURMQK5EhF9Dft7GdgX4oUdn2MLq6ZTaQ1LtU95pMbzmAV69i0tZCOwSd3Ui8yn28gpfeU5Or0irGoFMgl8CHjYEtpkIY0uaZSazIcZZnbdKEl91TsRqslUL4zHbeLVbnMqFwCZ41BluqfbSkph2Ia1W2Ijs8GbXJ8Agm3FR6CtlyFgV9tplNtQI29Uau9oPgnUdb7OEv7bG/QLSJqJy9gp1lSf4lVuSispG1MfbSICNvR22ErKHx+Kit5wh3qnglDYdRlY+FDO0NbFuDb85w6HMBTqSMRXgQlRO8aorPBmLrT0329Kq/SCMMxPFdiSRiEpkDnoKAesITz2F12hLi9ckWgtOZyuC+gqnLOLWxlLH8myMR7vHm2/iO9wlWEgROE7gzyew5SRzxb5JtF3Eb+WItgq4zWPZuykB/Yaz6T8UOv+ypz+wb34manxnV78joH7Bl14KJIPrMIQj9b9KW9oqY456+ATmqB2w1yziqidwaO3X9sLGZwJijE9dC+RBMvlNoAKuPqM0bwjmNZyprAAj2FNiivm+hfGhg69+KK5m8Nay2PU4TjkZHnWOX18QMu5kW25F8ULgn2SssD5cM1tK4Is5XNk0/twxnmwKm3ra4GIxJmjlBXSA20jhfK2SQ+0MvyYQMSAsbUaMG2n3Gq+YdCjB/va45tP6EzuFGNupEPZEHFuomudiOaE1OsGjp3Fq4rSaxK7t4zIUAV6zo1/heYlM9SPuigRb6n7LYLm+5PnpB5PFSFRG+S3qxRbVi3SnZzQuTgmLGZulvdexVd1nW41LhN7jlWP34qyzdIW/siRoGqQ7Zb58veL74x1PTw+M5xcklDy2XVF4LheD+XsqQ4ukhNlTSfKuEuNNUdJfLLJ9fMlmboCz0GHHLOIz05RPTQHd8PBjzdfHzzK/Z329kKNnlLl5WPH3X9/58/men093suqK+WrCYDqkMxlgnZ9j9F9+HGXJZoGAhL816vDz+ZaHP5bcfr3l/nHJ7483/AfijyyY0ZwGeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"zig zag\"\n        title=\"zig zag\"\n        src=\"/static/8ae3fe8ed942ec3cd5c922ab9549f6b4/fcda8/zigzag.png\"\n        srcset=\"/static/8ae3fe8ed942ec3cd5c922ab9549f6b4/12f09/zigzag.png 148w,\n/static/8ae3fe8ed942ec3cd5c922ab9549f6b4/e4a3f/zigzag.png 295w,\n/static/8ae3fe8ed942ec3cd5c922ab9549f6b4/fcda8/zigzag.png 590w,\n/static/8ae3fe8ed942ec3cd5c922ab9549f6b4/50383/zigzag.png 740w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\nHere is a representation of a machine’s route.</p>\n<h2>Algorithm 1 - Detection of Headers and Work Lines</h2>\n<p>An important piece of data is that at the end of a work line, the machine lifts the head to make a 180-degree turn and move on to the next line.</p>\n<p>While this occurs, <strong>the machine does not harvest or sow, so those pieces should be discarded.</strong>\nFor this, first of all, we must <strong>detect these cases</strong> and separate them from the work lines themselves.</p>\n<p>The algorithm I developed uses changes in the GPS angle to detect these 180-degree turns, and compares them with the time from the last data point. This way, we can have a <strong>ratio of angle variation over time</strong>. When it exceeds a certain value, it is estimated that the machine is making a turn sharp enough to be considered a header.</p>\n<p>The steps to get to this result are:</p>\n<ol>\n<li>Calculate the difference in angle between the previous and current data. It is relevant to take into account that when passing from angle 0 to 359 there is not 359 degrees of distance, but 1.</li>\n<li>Calculate the time difference from the previous and current data.</li>\n<li>Calculate the ratio between angle variation and time variation.</li>\n<li>Data with a turnrate higher than 12 (a magic number obtained by trial and error) are given a “turning” flag = 1, and a 0 is assigned to the other data.</li>\n<li>Add a column with the difference between the “turning” state of the previous data and the current one. In those data where the difference is 0, it means that the previous state was maintained.</li>\n</ol>\n<p>In this way, if I filter those rows with a state change of 1 or -1, what I obtain are the rows that begin a period of rotation or a line period.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4acd68f74b550c20475aab9dc5c845b1/17a7a/code2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.16216216216216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA/0lEQVQoz42RSW6EMBBFOQuLVmM6tEER84wNbJjvf5YfV6mJEFKkLJ5cNq7nb2M9Hg8IIRAEAXzfh5QSvqml98K3QboCvuswb0ZAvgQ84cBznniLJ75cF7ZtM1Ycx0iSBGmaIs9zjOPIKKWhtIbWPbpOcc3zvufvsekJo4iJDOQhrDAMTUOHZVlwHAf2fee6bRo0hmmaeKQ9tFbXNYZh4MOvougjZqFSCvM8Y9s2LOuK2UjKsjTNDcupJmlVVSiKgvdnWfYrPGU34cTpViNkiWkkAR1EEkpGYkp2F175CDVLrkISNG3LV6akranPlPSOef6H8FykH3OO/+G86l34A46X7wFMZzpgAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"code 2\"\n        title=\"code 2\"\n        src=\"/static/4acd68f74b550c20475aab9dc5c845b1/fcda8/code2.png\"\n        srcset=\"/static/4acd68f74b550c20475aab9dc5c845b1/12f09/code2.png 148w,\n/static/4acd68f74b550c20475aab9dc5c845b1/e4a3f/code2.png 295w,\n/static/4acd68f74b550c20475aab9dc5c845b1/fcda8/code2.png 590w,\n/static/4acd68f74b550c20475aab9dc5c845b1/17a7a/code2.png 753w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>If I separate the original dataframe using the rows from the previous step, I obtain multiple data segments, where work lines and headers alternate.</p>\n<p>In the following images, you can see the results, where the points that make up the work lines are shown in blue and the headers in red.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 294px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3bb6a31723d8f69af842fca7fa9f8ffb/04a86/caso1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACTklEQVQ4y5VUiW7aQBDl/7+gP9CKqkUlUVJFKlKiKhQkWiJwgGBsIMZgjgDyhc3hfZ1ZA4HGqGSk0R6z+3Zm3uykcChCwOz3oeo6NF2FbdvYbDZYrVZnqaD7Kb4QhqHc8BcLWFYfs04HWt2E7dhwHOe/6rou5vO5nKeCIICqqqRNjCYv8OpNNL4+oWeAvMPZEkVRDHi4GQZLFHMWsheA0QNmM8F5oMNChnNKWThCCbigMDVNQ7WqYPIyQOlPgMwXgW5XUBgx4O5Skuxs6/U6Bnx9id0OoVRdfPoIKIrYhhzbzgbkHLbbbeh6mzyaoFZ18DkNFH5FcbgiBn2Xh77vIwhC2gzw+OghlwPS6QiUjfd7yMkcj8cwiAXbmaL64OD+HviW2cAyN1sGT4O+AVwul5hOpxgMBrQxg2l6uP4O3P5Y40lZ7S+dDciLOOSARo/y6OHuDshmgWLxOOQk0ERSdP5qVDoTKuzVykepBFxdCdzcCFq/giaVTyIp+8IOl6Qunp/ZQ4ELKnBdF9s8JrP9BpALu9FooFaryTwGwUJ6VSgIXF6SXoP+KvYFfuqnHOVwZ+Am4bpe7NEmwu1PIPNhjOFvI/YmOgY5FAbk7nTQHFSMRiNJzE58qsP5Qwfw7LPq0PM8pHjCYe9aWIdaF4O3WhoRpaJjdNAi0niPyWs2m5JAHnkd/7KY1D710tS/L3JfM01TAlvWUI4DOtjtdmltybHX68kzhmHI/OfzedTrdWlPsfFQmZjhcCjD5wM83+nhmu18XlEUlMtlVCoVaf8LraGvHvszAeQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"case1\"\n        title=\"case1\"\n        src=\"/static/3bb6a31723d8f69af842fca7fa9f8ffb/04a86/caso1.png\"\n        srcset=\"/static/3bb6a31723d8f69af842fca7fa9f8ffb/12f09/caso1.png 148w,\n/static/3bb6a31723d8f69af842fca7fa9f8ffb/04a86/caso1.png 294w\"\n        sizes=\"(max-width: 294px) 100vw, 294px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 305px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/2de26789cdbbf055387ea985c0957a6f/a3e09/caso2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 81.08108108108108%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACHElEQVQ4y3VUXXPaQAzk//+lPnTS0umQPHSaGRxCCbQGbOD8dWdibHO+rSRjYgLczM3JZ2m90koe4NOKoghZlp231hnSNKP7DHHcnvzM932/NE3hnMOgrmvsdjssl0s58zy/+IC17XY47QagENn9ZYxB0zQYVFWFJEmw3W7l1FpTlAPFoSyBd13TRxwCv0b4r0JKr62AOhSFE1a8OE4AS4rabDZYLBYCahiQweIcr57Fzx8Ww+8Ov56O+Du3mDyXeB1uxaexNwAt5RPHsYDyabQRh+Voha9fakz/sDMxbuOQKEvgbb4MdpOhUgq+72O9XsNwDRuLxbPBLgJ61cP73mE0AsJNe89YV4DH41GUZTBhaDTsETgUzQkIUkPPcxgOgbc3dwF2BciisOScMsu/3xsR45ShADw8AC8vIL8PVU84t1MOw/Asis40KmJYqBxP3wo8PgL73J3ZtszQs++IImDSrKYFDFOsf6uODzm7K7CbDDllBvP9JfVhTPXUoLK2TU2+VXnJrA96F5BFCYIASZogChTqgyWhLcpDywzuUtH+upsy1zGmScl1y1CrinqyOYvTKdoBfH4+jx6LwnM8nU5FaW0Muu47VAS8K2H3Be6tK0C+YIOZ8sn15DbiFLTJaDIUMhWRrWXWu3d8drPPNg+HAPa/VhSFTMxkMpGeDNaB2IpqzEFsz2Yz+SPN53OMx2NhxvX3PA+r1Qr/AThW08yCo6AmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"case2\"\n        title=\"case2\"\n        src=\"/static/2de26789cdbbf055387ea985c0957a6f/a3e09/caso2.png\"\n        srcset=\"/static/2de26789cdbbf055387ea985c0957a6f/12f09/caso2.png 148w,\n/static/2de26789cdbbf055387ea985c0957a6f/e4a3f/caso2.png 295w,\n/static/2de26789cdbbf055387ea985c0957a6f/a3e09/caso2.png 305w\"\n        sizes=\"(max-width: 305px) 100vw, 305px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>With some later optimizations, the result improves noticeably.</p>\n<h2>Algorithm 2 - Detection of Interrow Distance</h2>\n<p>A data point that is relevant for some clients is the distance between one work line and the next.</p>\n<p>This algorithm requires the operator to work in a zigzag pattern, moving from one work line to the next in an orderly fashion. </p>\n<p>The work lines are irregular and consist of hundreds of points, so the algorithm with which I solved the problem is as follows:</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 581px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/10603d0eb5da124685d78ef6f9beddf9/92d15/entrefila.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.189189189189186%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABNElEQVQoz22SiXLDIAxE8/+f2XQSY+ODw9x4KymxM51WM5hhjR4rxK3Win4cAI3eO03HNXi97zu8d+/1R+c85zx6a5LLOsdtHEfklOBjweITUoyymZO01jDbCr8HTJtDKUUSWZ/nmf5tiJS7uoAY0ws4PJ8IBNE+k1MgpXg51NOE1ViMLiPlgtaq6BPpxhgBKJsQSxNTAlRqgPUBJlYRGH6WtS4z7mqRJKoNpb6AwzCIOxOKDI50AqdR4T4ZDCb+AbKTp15R2oFGsFo/Di053AhWW5c7/AUcN489dxFyzhdwmdnhjCo961RyE50dzsuC7zVejbqAIQSMk8ZGJ/JFK6UuJ8456NXAeY+NSuS93Eu+P2MdvpaA9n4Z3DAB8ocXDPGUaK29nsAZDH48HjL/F+d+nn8AiYhvBm/wMfgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"interrow\"\n        title=\"interrow\"\n        src=\"/static/10603d0eb5da124685d78ef6f9beddf9/92d15/entrefila.png\"\n        srcset=\"/static/10603d0eb5da124685d78ef6f9beddf9/12f09/entrefila.png 148w,\n/static/10603d0eb5da124685d78ef6f9beddf9/e4a3f/entrefila.png 295w,\n/static/10603d0eb5da124685d78ef6f9beddf9/92d15/entrefila.png 581w\"\n        sizes=\"(max-width: 581px) 100vw, 581px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>Take a series of random points (<strong>from now on A</strong>) from a line and for each of them draw a perpendicular line (<strong>from now on P</strong>). </li>\n<li>These lines are intersected with the next work line at a point (<strong>from now on B</strong>).</li>\n<li>Measure the distance between A and B.</li>\n<li>Calculate the median of these distances.</li>\n</ol>\n<p>While there is quite an approximation in the algorithm, with this approach, a precision is obtained that is even greater than that of measurements made manually in the field, as dozens of samples can be obtained for each work line.</p>\n<h2>Algorithm 3 - Detection of Work State through Machine Learning</h2>\n<p>A need that arose was to detect the working state of a machine (planter or harvester), as some do not carry a sensor that tells us when it is working, or in other cases, the sensor fails.</p>\n<p>This algorithm uses <strong>historical data of the route</strong> of harvesters and planters while they were working, and data from periods when they were not working, and trains a <strong>machine learning model</strong> that can visually determine when a machine is making a route according to a work state and when it is not.</p>\n<h3>Images of Routes in Work State</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/0e6d308a0622c6691455fcc2c2ed7ce9/91b67/machinelearning1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.621621621621614%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACiklEQVQozx3S6U+SAQDH8eef6VXHWqvmVlvLDpe6Ls00ldQgEPHxADVMSYQ8AB8ROTygS9SQymWkk5gWmVZbrUVRs0jlamv9D99YL36vfp+XX2HINYSp/xZO7yj3Zu5zvqWRKq3Ig/kAtz12NEY9jmkfvlk/xi490pCFe48ecrOnk45OHf7HAYZH7ZiNBvrsNoRrooK8w3soLi/Ear3NobwD7D26H9Fi4krFZY7s28U5jRyDZEZ7tgD5tRo6nFa6T+YhHtzNDZeVVq0aVeFpSlQyhKehJ0x6XUwvBFhfjeAdd+N8NMXy2kuCwTn8dyeYXVwgEnlOYMpL+MUi4egyQbeVJe8IkY0VpmbvsDDjZT40hxCNvmIpvMzK6yixjx9YjIR5llv80yfW196wEo7wYeMta7k/tBhiJbrK5ufPvH/3jrX1Db7FvvA655++WP5vBIPNjKbgFOXVl3H4xtEWnqH4WB7DrlH6Gpu4mH+ChmaR/mELqpP51FSX4fX6kKmUlOXs6LgHXauILP8YSsVVhAGXBel6FSZTB26/D4+6DoOinLGHfuYGhxjoNtLrciJ5JHqaFRg7RQLBIL1GE/p6NZP+B/T2G7A31NJp0CH8iH/h24/v7KR2SG0liMVjbG795HcmTTzxk6+/fpHMpskkt9hOJtjKpsimk6R2tkn/zvL3zx8Sm3ESqW0y2QyCJFm5WlVBSy4Xt8+DvL6WkupS7G4H9WolBwuPo+pqY8Bh4aa+hUFbH2a3hLK+BmtXO9OBGZStarrbmxhzjSBY7INo5FXoG+qwTdgR60qRVxblGhxmpE1H7aViKnv0GEzdVFwoQtfejOSUUJedp6W4ANukhzZVLZVFp5G1NvIPgkDjNWNWpFsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"route1\"\n        title=\"route1\"\n        src=\"/static/0e6d308a0622c6691455fcc2c2ed7ce9/fcda8/machinelearning1.png\"\n        srcset=\"/static/0e6d308a0622c6691455fcc2c2ed7ce9/12f09/machinelearning1.png 148w,\n/static/0e6d308a0622c6691455fcc2c2ed7ce9/e4a3f/machinelearning1.png 295w,\n/static/0e6d308a0622c6691455fcc2c2ed7ce9/fcda8/machinelearning1.png 590w,\n/static/0e6d308a0622c6691455fcc2c2ed7ce9/efc66/machinelearning1.png 885w,\n/static/0e6d308a0622c6691455fcc2c2ed7ce9/c83ae/machinelearning1.png 1180w,\n/static/0e6d308a0622c6691455fcc2c2ed7ce9/91b67/machinelearning1.png 1527w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Images of Routes Without Work State (GPS Failures Are Included in This Classification)</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/915c08102b24300217c2132d9113d3e4/c8e86/machinelearning2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 67.56756756756756%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAADjklEQVQ4y22T2VPTZxSG8y943z+jMx1hRtkEEVkCWUggJCELCWFJCJhA2CGG4qCFliABDfsmNIAVnIhAlUoryCY7dnBK0WKvW4sUn/7qpfrOnKv3O++cOd9zRGXuGsZG7/AgOEZXZxtflzqYmwoSmAnS4C7D13CVbz1VtN3w8J2nnOX5OYJ3A9ysq+RWYz3+xmtcr6+l5bqHyZF+RDEyMRXuauqrSnDl6DEpkgn0dNE8PojFoqY230Ce1UhJgZFig4K5++N0t3txZauot5tocuTgtBlx5GgZ9DUKgUoJhlwzVkkizmwdJpWc4Z5uvIEBFFeyCSRe5FFYCG0WDSUmFQ/HAwz13cbjMNNr1TOkT6WtKIuGchv3+m8j+lKYUJabSY1KRpndQq46lZHeLtrvfk+Cu5iemAg4c4ZutQy7KYOZiXF8zTeQyBLxp0oZTYrhmtNMe00h9wZuIfoiPILL1iw8uTrqbFnIEy7S0dZK/+wD0twusnOMeNVKCk1qtEmxBEeG8Ax2ctaSSbnLQZOw5zKrAadOwYCvCdHMwyl+2d5ia/8FexvrLC0ucHh4yMutDZbmH/N4dZXl7U1219dYe7bIm6Mjdnc2+WnhCc9/fcFvr37n4OU+e8Kb14cHiDg+5vTkhE/09i3v/6/T00+9v//64J981Hf6HkTaqnws1XYK65zkuIuQWTOZnJnEO9BPtt1KfXUlteWllJe50DsKmJ6ewj82jLG0iMqSK1idBRRVu7ha6aRvSMAmRB5OtDaeKFUMCYYkQhUXaB3upLmzHX2ejrycLHTqdBTyZMKS4+gcGaTM+w1npZdJUog5lxRNhCqZjAwpfn87oq/EYSQq41HJLxFrlHBOCO4K9NInYFPhduIqduDKy0VhyeJ8egrDE2N4fS1cUElJ0Cgwp0lIz5CjMWqoaxY+JTQ1Colegs2kIM2m4bwyio5AD+MToxjyzTicxbhtVmx2OyFKMSPBH+huvUmcOIFQgd18bRpFOhVxcjHaCpcQKI0kUh6LVBaD3qwkXBFJ6x0/bT0+ouXR6ITryNNIsOZriEu/RMdwN+0tXpLF8SSly0hJl5KnVZGSmkJmeQminx9NM7/wlJX1FZaEWl1b4o8/j9haWeTJ7H0Wl5+yubnC7t46G1vLvHrzmgMBr+UfZ4We5zwT8NrZ3WFvZ5u9/X0Bm5N/+azevRM4OP28d/wPAjMfMPlY/wGO4wrWsDdKkAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"route2\"\n        title=\"route2\"\n        src=\"/static/915c08102b24300217c2132d9113d3e4/fcda8/machinelearning2.png\"\n        srcset=\"/static/915c08102b24300217c2132d9113d3e4/12f09/machinelearning2.png 148w,\n/static/915c08102b24300217c2132d9113d3e4/e4a3f/machinelearning2.png 295w,\n/static/915c08102b24300217c2132d9113d3e4/fcda8/machinelearning2.png 590w,\n/static/915c08102b24300217c2132d9113d3e4/c8e86/machinelearning2.png 758w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h3>Train to Detect Which State Corresponds and Generate Alerts</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6f379e74193fb1a9826e23a88e8b6f98/7ca1f/img6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.86486486486486%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACHklEQVQoz22S3UtTARjGDwSREhRedFHRf9Btl0ZWUDkqgoHLrwnOj3Q6t7Wzj3aabjrntrOznZ2pm3POrZoKrsSwLgo/KojqLorq/6hpwq9DkBT0wu/u5Xnf93kfweMNEFZUFE1DzaTJaCmkewGu3WwhHI+jpKeREylUvSeVyZIrl2gz9yEcbuBowxnqjp/myLFTBwhuuxvxfgB/eIzJySAjjh7arX20tdxGbLvKSj6NPejGHxTZePmCrZ0dZH2IQ5SYjCpMRGRiCY24ohGNqwhOn4uEEqRazvOsWuHx6ipRNYPJ2ELS08daeY6J2Dj9oo3nW5uk5mbwBcP8+F7jfyVYBrvxSsMsaVM8WZyhkM0jx5IYTJ1Y/SKPqsvEZlUWFnNUny7T62rHJ3l5/f4D86srfP76hf39fWq7u+zt/UTwumyEwx6mFgqkclls4iDD4l0MxlbaO0zMZjSG/E7sjn6mSxVuGBtxOK3Ei1nOnz1JqZz7vVmtVtMF9xAi4xIP8kmylYcUlypE5BB2v4/Wjm60osz65hqhZJZiqcD2m3ek5nPE1TTbb18xV1D49O3jvyebLGZswxYkTReKSAxZe7E5nXS0dmHuaSaxOMVlo50L1wdY31gj4XXR1TvIaCiKrM4ePOQPgmXETiwWJTGdIaKlCYyOMeQQabpo4JKhGfPAHa7c6udcU6fuXQiP6KaxqZlD9Seo1yNTp0flb34B7E2eUuvgG2kAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"training\"\n        title=\"training\"\n        src=\"/static/6f379e74193fb1a9826e23a88e8b6f98/fcda8/img6.png\"\n        srcset=\"/static/6f379e74193fb1a9826e23a88e8b6f98/12f09/img6.png 148w,\n/static/6f379e74193fb1a9826e23a88e8b6f98/e4a3f/img6.png 295w,\n/static/6f379e74193fb1a9826e23a88e8b6f98/fcda8/img6.png 590w,\n/static/6f379e74193fb1a9826e23a88e8b6f98/efc66/img6.png 885w,\n/static/6f379e74193fb1a9826e23a88e8b6f98/c83ae/img6.png 1180w,\n/static/6f379e74193fb1a9826e23a88e8b6f98/7ca1f/img6.png 1890w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>","frontmatter":{"title":"Algorithms for Agriculture","date":"October 16, 2021","description":"In this post, I will discuss some of the algorithms I developed for a real application focused on agriculture. Mainly based on geographical information.","time":10}}},"pageContext":{"slug":"/agro-algorithms/","previous":{"fields":{"slug":"/frontend-lol-app/"},"frontmatter":{"title":"League of Legends Assistant Part 2 - Frontend","categories":["frontend"]}},"next":{"fields":{"slug":"/lol-champ-minimap-detection-part-1/"},"frontmatter":{"title":"Real-time LOL Character Detection (Part 1)","categories":["machine learning","league of legends"]}}}},"staticQueryHashes":["3649515864","63159454"]}